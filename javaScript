// SeleÃ§Ã£o dos elementos da pÃ¡gina
const statusEl = document.getElementById('status');
const abrirBtn = document.getElementById('abrir');
const fecharBtn = document.getElementById('fechar');

// FunÃ§Ã£o para atualizar o estado do sensor de chuva
async function atualizarEstado() {
  try {
    // ğŸ”§ SimulaÃ§Ã£o (substitui por fetch('/api/sensor') no projeto real)
    const dados = { chuva: Math.random() > 0.5 }; // gera valor aleatÃ³rio

    if (dados.chuva) {
      statusEl.innerHTML = "ğŸŒ§ï¸ EstÃ¡ a chover! <strong>Varal recolhido</strong>";
      statusEl.style.background = "#ffebee";
    } else {
      statusEl.innerHTML = "â˜€ï¸ Tempo limpo. <strong>Varal estendido</strong>";
      statusEl.style.background = "#e8f5e9";
    }
  } catch (e) {
    statusEl.innerHTML = "Erro ao ler o sensor ğŸ˜¢";
    statusEl.style.background = "#fff3e0";
  }
}

// Controlo manual do varal (enviar comandos ao Arduino)
abrirBtn.addEventListener('click', async () => {
  // Exemplo real: await fetch('/api/controlo?acao=abrir');
  statusEl.innerHTML = "â˜€ï¸ Varal aberto manualmente.";
  statusEl.style.background = "#e8f5e9";
});

fecharBtn.addEventListener('click', async () => {
  // Exemplo real: await fetch('/api/controlo?acao=fechar');
  statusEl.innerHTML = "ğŸŒ§ï¸ Varal fechado manualmente.";
  statusEl.style.background = "#ffebee";
});

// Atualizar estado a cada 5 segundos
setInterval(atualizarEstado, 5000);
atualizarEstado();
