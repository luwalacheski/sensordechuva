<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VaralAuto — Varal de Roupas Automático</title>
  <style>
    :root{--accent:#2b8aef;--muted:#6b7280;--card:#fff;--bg:#f3f4f6}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0; background:var(--bg); color:#111}
    header{background:linear-gradient(90deg,#0f172a 0%, #0b1220 100%); color:white; padding:24px}
    .container{max-width:1200px;margin:20px auto;padding:16px}
    .site-title{display:flex;gap:12px;align-items:center}
    .logo{width:56px;height:56px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#0ea5a4);display:flex;align-items:center;justify-content:center;font-weight:700;color:white}
    nav{margin-left:auto}
    nav a{color:rgba(255,255,255,.9);text-decoration:none;margin-left:14px}
    main{display:grid;grid-template-columns:1fr 360px;gap:20px}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 4px 10px rgba(2,6,23,0.06)}
    h1,h2{margin:0 0 12px 0}
    .products{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .product{padding:12px;border-radius:10px;border:1px solid #e6e9ef}
    .product img{width:100%;height:160px;object-fit:cover;border-radius:8px}
    .product .meta{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;background:var(--accent);color:white;text-decoration:none;border:none;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid var(--accent)}
    .cart-items{max-height:360px;overflow:auto}
    .cart-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #eef2f7}
    .small{font-size:13px;color:var(--muted)}
    .about-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    form input, form textarea, form select{width:100%;padding:10px;border-radius:8px;border:1px solid #d9e0ea;margin-bottom:10px}
    footer{padding:20px;text-align:center;color:var(--muted)}
    @media(max-width:980px){main{grid-template-columns:1fr} .products{grid-template-columns:1fr} nav{display:none}}
  </style>
</head>
<body>
  <header>
    <div class="container" style="display:flex;align-items:center">
      <div class="site-title">
        <div class="logo">VA</div>
        <div>
          <div style="font-weight:700">VaralAuto</div>
          <div style="font-size:13px;color:rgba(255,255,255,0.8)">Solução automática para dias de chuva</div>
        </div>
      </div>
      <nav>
        <a href="#produtos">Produtos</a>
        <a href="#sobre">Sobre nós</a>
        <a href="#checkout">Finalizar compra</a>
      </nav>
    </div>
  </header>

  <div class="container">
    <main>
      <section>
        <div class="card" id="produtos">
          <h1>Varal automático com sensor de chuva</h1>
          <p class="small">Quando chove, um sensor detecta a água e o varal é recolhido automaticamente — controlado por um Arduino. Projetado para facilitar sua rotina e proteger as roupas.</p>

          <h2 style="margin-top:14px">Nossos modelos</h2>
          <div class="products" id="product-list"></div>

          <h2 style="margin-top:18px">Como funciona (resumo técnico)</h2>
          <div class="about-grid small">
            <div class="card">
              <strong>Sensor de chuva</strong>
              <p>Usamos um sensor de água/chuva conectado a uma placa Arduino. Ao detectar gotas, o sistema dispara um motor que recolhe o varal.</p>
            </div>
            <div class="card">
              <strong>Controle</strong>
              <p>Arduino UNO ou compatível, relé para acionar o motor e limit switches para posicionamento seguro. O sistema pode ser alimentado por 12V.</p>
            </div>
          </div>

          <h2 style="margin-top:18px">Mais detalhes</h2>
          <p class="small">O produto vem com manual de instalação, esquema elétrico e código exemplo para o Arduino. É recomendado que a instalação elétrica seja feita por um profissional.</p>
        </div>

        <div class="card" id="sobre">
          <h2>Sobre nós</h2>
          <p class="small">A VaralAuto nasceu da experiência prática com a rotina de lavar roupas em cidades com chuvas frequentes. Fundada por engenheiros e makers, a missão foi criar um produto acessível que automatizasse o recolhimento do varal quando chove, evitando roupas molhadas e retrabalho.</p>
          <p class="small">Vendemos diretamente ao consumidor através deste site. Todos os nossos pedidos são processados localmente no navegador (demo) — para produção real integramos gateways de pagamento e logística.</p>
        </div>

        <div class="card">
          <h2>FAQ rápido</h2>
          <p class="small"><strong>Pergunta:</strong> Preciso saber programar Arduino?</p>
          <p class="small">Não — enviamos o código pronto e instruções passo a passo. Para ajustes finos, um técnico local pode ajudar.</p>
        </div>
      </section>

      <aside>
        <div class="card">
          <h2>Carrinho</h2>
          <div class="cart-items" id="cart-list"></div>
          <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="small">Total:</div>
              <div id="cart-total" style="font-weight:700">R$ 0,00</div>
            </div>
            <div>
              <button class="btn" id="btn-checkout">Finalizar</button>
            </div>
          </div>
        </div>

        <div class="card" id="checkout" style="margin-top:12px;display:none">
          <h2>Finalizar compra</h2>
          <form id="checkout-form">
            <label>Nome completo</label>
            <input type="text" id="nome" required />
            <label>CPF</label>
            <input type="text" id="cpf" placeholder="Somente números" maxlength="11" required />
            <label>Telefone</label>
            <input type="text" id="telefone" placeholder="(xx) xxxxx-xxxx" required />
            <label>Endereço (Rua, Número)</label>
            <input type="text" id="endereco" required />
            <label>Cidade</label>
            <input type="text" id="cidade" required />
            <label>CEP</label>
            <input type="text" id="cep" required />
            <button class="btn" type="submit">Enviar pedido</button>
            <button type="button" class="btn ghost" id="btn-cancel">Cancelar</button>
          </form>
          <div id="order-result" style="margin-top:12px"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>Contato</h3>
          <p class="small">Telefone: (46) 9982-6576 <br/>E-mail: @varalauto.com.br</p>
        </div>
      </aside>
    </main>

    <footer class="container">
      <div class="small">Demo de e‑commerce (cliente) — nenhum pagamento real é processado aqui. Arduíno: exemplo de código incluso no manual do produto.</div>
    </footer>
  </div>

  <script>
    // Dados de produtos (demo)
    const products = [
      {id:1, name:'VaralAuto Compact', price:249.90, desc:'Modelo básico, ideal para apartamentos e áreas pequenas.', img:'https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=800&q=60'},
      {id:2, name:'VaralAuto Pro', price:399.90, desc:'Motor mais potente, inclui sensores e limit switches.', img:'https://images.unsplash.com/photo-1581579182437-1f2b5a0f0c92?auto=format&fit=crop&w=800&q=60'},
      {id:3, name:'Kit DIY (sensor + código)', price:99.90, desc:'Kit para makers que desejam montar o sistema com seu próprio varal.', img:'https://images.unsplash.com/photo-1581091870609-7fd6a1777f3b?auto=format&fit=crop&w=800&q=60'}
    ];

    // Estado do carrinho
    let cart = JSON.parse(localStorage.getItem('cart_demo')||'[]');

    const productListEl = document.getElementById('product-list');
    const cartListEl = document.getElementById('cart-list');
    const cartTotalEl = document.getElementById('cart-total');
    const btnCheckout = document.getElementById('btn-checkout');
    const checkoutCard = document.getElementById('checkout');
    const checkoutForm = document.getElementById('checkout-form');
    const orderResult = document.getElementById('order-result');
    const btnCancel = document.getElementById('btn-cancel');

    function formatPrice(v){return 'R$ '+v.toFixed(2).replace('.',',')}

    function renderProducts(){
      productListEl.innerHTML = '';
      products.forEach(p=>{
        const div = document.createElement('div'); div.className='product';
        div.innerHTML = `
          <img src="${p.img}" alt="${p.name}" />
          <h3>${p.name}</h3>
          <div class="small">${p.desc}</div>
          <div class="meta">
            <div style="font-weight:700">${formatPrice(p.price)}</div>
            <button class="btn" onclick="addToCart(${p.id})">Adicionar</button>
          </div>
        `;
        productListEl.appendChild(div);
      })
    }

    function saveCart(){ localStorage.setItem('cart_demo', JSON.stringify(cart)); }

    function addToCart(id){
      const p = products.find(x=>x.id===id); if(!p) return;
      const item = cart.find(i=>i.id===id);
      if(item) item.q++;
      else cart.push({id:p.id,name:p.name,price:p.price,q:1});
      saveCart(); renderCart();
    }

    function removeFromCart(id){ cart = cart.filter(i=>i.id!==id); saveCart(); renderCart(); }

    function changeQty(id, delta){ const it = cart.find(c=>c.id===id); if(!it) return; it.q += delta; if(it.q<1) cart = cart.filter(c=>c.id!==id); saveCart(); renderCart(); }

    function renderCart(){
      cartListEl.innerHTML = '';
      if(cart.length===0){ cartListEl.innerHTML='<div class="small">Carrinho vazio</div>'; cartTotalEl.textContent='R$ 0,00'; return; }
      let total = 0;
      cart.forEach(i=>{
        total += i.price * i.q;
        const row = document.createElement('div'); row.className='cart-row';
        row.innerHTML = `
          <div>
            <div style="font-weight:600">${i.name}</div>
            <div class="small">${i.q} x ${formatPrice(i.price)}</div>
          </div>
          <div style="text-align:right">
            <div style="margin-bottom:6px">${formatPrice(i.price*i.q)}</div>
            <div>
              <button class="btn ghost" onclick="changeQty(${i.id},-1)">-</button>
              <button class="btn ghost" onclick="changeQty(${i.id},1)">+</button>
              <button class="btn ghost" onclick="removeFromCart(${i.id})">Remover</button>
            </div>
          </div>
        `;
        cartListEl.appendChild(row);
      });
      cartTotalEl.textContent = formatPrice(total);
    }

    // Checkout flow
    btnCheckout.addEventListener('click', ()=>{
      if(cart.length===0){ alert('Seu carrinho está vazio.'); return; }
      checkoutCard.style.display = 'block';
      window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});
    });

    btnCancel.addEventListener('click', ()=>{ checkoutCard.style.display='none'; });

    function validateCPF(cpf){
      // limpa
      cpf = (cpf||'').replace(/\D/g,''); if(cpf.length!==11) return false;
      if(/^(\d)\1+$/.test(cpf)) return false; // todos iguais
      const calc = (t)=>{
        let s=0; for(let i=0;i<t;i++) s += parseInt(cpf.charAt(i)) * ((t+1)-i);
        let r = 11 - (s % 11); return r>9?0:r;
      }
      return calc(9) === parseInt(cpf.charAt(9)) && calc(10) === parseInt(cpf.charAt(10));
    }

    function maskPhone(v){ return v.replace(/\D/g,'').replace(/(\d{2})(\d)/,'($1) $2').replace(/(\d{5})(\d)/,'$1-$2').substr(0,15); }
    function maskCEP(v){ return v.replace(/\D/g,'').replace(/(\d{5})(\d)/,'$1-$2').substr(0,9); }

    document.getElementById('telefone').addEventListener('input', e=>{ e.target.value = maskPhone(e.target.value); });
    document.getElementById('cep').addEventListener('input', e=>{ e.target.value = maskCEP(e.target.value); });

    checkoutForm.addEventListener('submit', (ev)=>{
      ev.preventDefault();
      const nome = document.getElementById('nome').value.trim();
      const cpf = document.getElementById('cpf').value.trim();
      const telefone = document.getElementById('telefone').value.trim();
      const endereco = document.getElementById('endereco').value.trim();
      const cidade = document.getElementById('cidade').value.trim();
      const cep = document.getElementById('cep').value.trim();

      if(!nome||!cpf||!telefone||!endereco||!cidade||!cep){ alert('Preencha todos os campos.'); return; }
      if(!validateCPF(cpf)){ alert('CPF inválido.'); return; }

      const order = {
        id: 'ORD-'+Date.now(),
        customer:{nome,cpf,telefone,endereco,cidade,cep},
        items: cart.map(i=>({id:i.id,name:i.name,price:i.price,q:i.q})),
        total: cart.reduce((s,i)=>s+i.price*i.q,0),
        date: new Date().toISOString()
      };

      // salvar pedido (demo) no localStorage
      const orders = JSON.parse(localStorage.getItem('orders_demo')||'[]');
      orders.push(order); localStorage.setItem('orders_demo', JSON.stringify(orders));

      // limpar carrinho
      cart = []; saveCart(); renderCart(); checkoutCard.style.display='none'; checkoutForm.reset();

      orderResult.innerHTML = `<div style="padding:12px;border-radius:10px;background:#ecfdf5;color:#065f46"><strong>Pedido enviado!</strong><div>ID: ${order.id}</div><div>Total: ${formatPrice(order.total)}</div></div>`;
      alert('Pedido realizado com sucesso! ID: '+order.id);
    });

    // Expor funções para botões inline
    window.addToCart = addToCart; window.changeQty = changeQty; window.removeFromCart = removeFromCart;

    // init
    renderProducts(); renderCart();
  </script>
</body>
</html>
